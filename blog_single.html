<!DOCTYPE html>
<html lang="da">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="Description" content="Gitte Bjørn - Om smykkekurserne, en side der fortæller om smykkerkurserne">
  <title></title>
  <link rel="stylesheet" href="css/basestyle.css">
  <link rel="stylesheet" href="css/tablet.css">
  <link rel="stylesheet" href="css/desktop.css">
  <link rel="stylesheet" href="https://use.typekit.net/lge2vfw.css">
  <link rel="apple-touch-icon" sizes="180x180" href="img/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png">
  <link rel="manifest" href="img/favicon/site.webmanifest">
  <style>
    .blog_img_wrap {
      width: 100vw;
      height: 50vh;
      position: relative;
      left: -30px;
      top: -100px;
      overflow: hidden;
      margin-bottom: -70px;
    }

    .blog_img {
      height: 100%;
      width: 100%;
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
    }

    @media only screen and (min-width: 800px) {
      .blog_img_wrap {
        left: -100px;
      }
    }

    @media only screen and (min-width: 1200px) {}

  </style>
</head>

<body>
  <main id="main"></main>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/animation.gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.6/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.6/ScrollToPlugin.min.js"></script>
  <script src="js/smoothScroll.js"></script>
  <script src="js/totop.js"></script>
  <script>
    let wp = `http://eigilnikolajsen.dk/kea/10_eksamen/wordpress/wp-json/wp/v2/`;
    let N = 0;
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get("id");
    document.addEventListener("DOMContentLoaded", hentJSON_blog);

    async function hentJSON_blog() {
      let wpEnd = `blog?_fields=title,dato,h4,lang_tekst,img,cta`;
      const response = await fetch(wp + wpEnd);
      let json = await response.json();

      json.forEach((t) => {
        N++;

        if (N == id) {
          let s = document.createElement("section");
          s.classList.add("blog_layout_section");
          s.dataset.secnr = N;

          let blog_content_wrap = document.createElement("div");
          blog_content_wrap.classList.add("blog_content_wrap");

          let blog_besk_wrap = document.createElement("div");
          blog_besk_wrap.classList.add("blog_besk_wrap");

          let blog_button_wrap = document.createElement("div");
          blog_button_wrap.classList.add("blog_button_wrap");

          let blog_img_wrap = document.createElement("div");
          blog_img_wrap.classList.add("blog_img_wrap");

          let dato = document.createElement("h3");
          dato.textContent = t.dato;

          let h4 = document.createElement("h1");
          h4.textContent = t.h4;

          let img = document.createElement("div");
          img.classList.add("blog_img");
          img.style.backgroundImage = `url(${t.img.guid})`;

          let lang_tekst = document.createElement("p");
          lang_tekst.textContent = t.lang_tekst;

          let cta = document.createElement("button");
          cta.textContent = "tilbage";
          cta.addEventListener("click", () => {
            location.href = `blog.html`;
          })

          blog_content_wrap.appendChild(blog_img_wrap);
          blog_img_wrap.appendChild(img);
          blog_besk_wrap.appendChild(dato);
          blog_besk_wrap.appendChild(h4);
          blog_besk_wrap.appendChild(lang_tekst);

          blog_button_wrap.appendChild(cta);
          blog_besk_wrap.appendChild(blog_button_wrap);
          blog_content_wrap.appendChild(blog_besk_wrap);

          s.appendChild(blog_content_wrap);
          document.querySelector("#main").appendChild(s);

        }
      })

    }

  </script>
</body>

</html>
